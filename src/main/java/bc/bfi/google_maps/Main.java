package bc.bfi.google_maps;

import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

public class Main extends javax.swing.JFrame {

    private final Queries queries = new Queries();
    private final SerperScraper serperScraper = new SerperScraper(queries);

    /**
     * Creates new form Main
     */
    public Main() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jButtonStart = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextAreaLocations = new javax.swing.JTextArea();
        jTextFieldStartTime = new javax.swing.JTextField();
        jTextFieldFinishTime = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Google Maps scraper");

        jButtonStart.setBackground(new java.awt.Color(153, 255, 255));
        jButtonStart.setText("Start");
        jButtonStart.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonStartActionPerformed(evt);
            }
        });

        jLabel1.setText("Locations:");

        jTextAreaLocations.setColumns(20);
        jTextAreaLocations.setRows(5);
        jTextAreaLocations.setText("Ashaway, Rhode Island|41.4275657,-71.8008861\nBelleville, Rhode Island|41.5540052,-71.4789688\nBradford, Rhode Island|41.3932494,-71.774126\nCarolina, Rhode Island|41.4639189,-71.6799695\nCenterdale, Rhode Island|41.8558799,-71.4892502\nCentral Falls, Rhode Island|41.890468,-71.4040507\nCharlestown, Rhode Island|41.3696679,-71.7455968\nChepachet, Rhode Island|41.90978,-71.6828495\nClayville, Rhode Island|41.77334,-71.6974752\nCoventry, Rhode Island|41.6937753,-71.7436808\nCranston, Rhode Island|41.7686911,-71.5093434\nCumberland Hill, Rhode Island|41.9715386,-71.484416\nEast Providence, Rhode Island|41.79858,-71.4389659\nEsmond, Rhode Island|41.872278,-71.5045995\nFoster Center, Rhode Island|41.7887584,-71.7721244\nGeorgiaville, Rhode Island|41.8870586,-71.5186941\nGreene, Rhode Island|41.6971277,-71.751244\nGreenville, Rhode Island|41.8868031,-71.5759155\nHarmony, Rhode Island|41.8994182,-71.6254775\nHarrisville, Rhode Island|41.9710405,-71.6893038\nHope Valley, Rhode Island|41.5100207,-71.737197\nHopkinton, Rhode Island|41.4704342,-71.8276923\nKingston, Rhode Island|41.4729078,-71.5437504\nManville, Rhode Island|41.9674415,-71.4844078\nMelville, Rhode Island|41.5573898,-71.3378945\nMisquamicut, Rhode Island|41.3237097,-71.8298238\nNarragansett Pier, Rhode Island|41.4276283,-71.4875396\nNewport, Rhode Island|41.4861444,-71.3658694\nNorth Foster, Rhode Island|41.8315028,-71.7609245\nPascoag, Rhode Island|41.9537531,-71.7251875\nPawtucket, Rhode Island|41.8776272,-71.3985696\nProvidence, Rhode Island|41.8171626,-71.4622849\nQuonochontaug, Rhode Island|41.3355091,-71.7169425\nSaunderstown, Rhode Island|41.5087978,-71.4288415\nTiverton, Rhode Island|41.6170499,-71.2588428\nUnion Village, Rhode Island|41.9912243,-71.5495287\nValley Falls, Rhode Island|41.9215765,-71.417628\nWakefield, Rhode Island|41.4403824,-71.5035423\nWarwick, Rhode Island|41.6989637,-71.5046903\nWashington, Rhode Island|41.375438,-71.9735348\nWatch Hill, Rhode Island|41.3141042,-71.8600263\nWeekapaug, Rhode Island|41.3309955,-71.7653051\nWest Kingston, Rhode Island|41.4866992,-71.5687825\nWesterly, Rhode Island|41.3021136,-71.9006432\nWoonsocket, Rhode Island|41.9984716,-71.5197095\nWyoming, Rhode Island|41.514772,-71.7005427");
        jScrollPane1.setViewportView(jTextAreaLocations);

        jTextFieldStartTime.setEditable(false);

        jTextFieldFinishTime.setEditable(false);

        jLabel2.setText("Start time:");

        jLabel3.setText("Finish time:");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 550, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGap(6, 6, 6)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(layout.createSequentialGroup()
                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(jLabel3)
                                            .addComponent(jLabel2))
                                        .addGap(28, 28, 28)
                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                            .addComponent(jTextFieldStartTime)
                                            .addComponent(jTextFieldFinishTime, javax.swing.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE)))
                                    .addComponent(jLabel1)))
                            .addComponent(jButtonStart, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jButtonStart)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 303, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextFieldStartTime, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextFieldFinishTime, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel3))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButtonStartActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonStartActionPerformed
        queries.loadLocations(this.jTextAreaLocations.getText());

        this.jTextFieldStartTime.setText(LocalDateTime.now().format(DateTimeFormatter.ISO_DATE_TIME));

        serperScraper.startScrape();

        this.jTextFieldFinishTime.setText(LocalDateTime.now().format(DateTimeFormatter.ISO_DATE_TIME));
    }//GEN-LAST:event_jButtonStartActionPerformed

    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Main().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButtonStart;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextArea jTextAreaLocations;
    private javax.swing.JTextField jTextFieldFinishTime;
    private javax.swing.JTextField jTextFieldStartTime;
    // End of variables declaration//GEN-END:variables

}
